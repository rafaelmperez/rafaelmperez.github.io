<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Implementaci√≥n y activaci√≥n de UFW en sistemas Linux. Proyecto de ciberseguridad con Ubuntu, Parrot OS, Bash, OpenSSH y m√°s. Portafolio de Rafael M. P√©rez, Sysadmin Junior.">
  <title> Firewall din√°mico con GeoIP | Portafolio Rafael M.P√©rez | Sysadmin Junior</title>

  <!-- Estilos y recursos -->
  <link rel="stylesheet" href="assets/css/tailwind.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="icon" href="favicon.png" type="image/x-icon">
</head>
  
   <!-- ‚úÖ Open Graph (Facebook, LinkedIn, WhatsApp) -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Implementaci√≥n y Activaci√≥n UFW" />
  <meta property="og:description" content="Portafolio Rafael M.P√©rez | Sysadmin Junior" />
  <meta property="og:image" content="https://rafaelmperez.com/assets/img/vistapreliminarufw.v1.webp" />
  <meta property="og:url" content="https://rafaelmperez.com/activacionufw.html" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:image" content="https://rafaelmperez.com/assets/img/vistapreliminarufw.v1.webp" />
  <meta property="og:image:type" content="image/webp" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
<body>
  <!-- Aqu√≠ va el contenido de tu p√°gina -->
</body>
</html>


<!-- Google Fonts optimizado -->
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" as="style">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" media="print" onload="this.media='all'">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<!-- TailwindCSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: { ... }
  }
</script>


</head>

<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          'nav-bg': '#000000',          // fondo negro
          'nav-text': 'rgb(255, 204, 0)', // texto amarillo vibrante
          'nav-hover': '#FFB800'        // color hover amarillo m√°s oscuro
        }
      }
    }
  }
</script>



<body class="bg-gray-100 text-gray-800 font-sans">

  <!-- Header -->
<header class="p-6 shadow-lg font-montserrat bg-black text-yellow-400">
  <div class="max-w-6xl mx-auto flex items-center justify-between">
    <!-- T√≠tulo -->
    <h1 class="text-2xl font-bold">
      Portafolio Rafael M.P√©rez | Sysadmin Junior
    </h1>

    <!-- Imagen peque√±a a la derecha -->
<i class="fas fa-shield-alt" style="color: rgb(255, 204, 0); font-size: 24px;"></i>

  </div>
</header>

<!-- Contenido del microproyecto -->
 
<main class="w-full max-w-4xl mx-auto px-4 sm:px-6 py-8 sm:py-12">
<h2 class="text-2xl font-bold mb-6 font-montserrat underline underline-offset-4">
  Firewall din√°mico con GeoIP
</h2>


  <!-- Logo insertado -->
<div class="flex justify-center mb-6">
  <img src="https://rafaelmperez.com/assets/img/geoipbanner.jpg" 
       alt="Logo UFW" 
       style="width: 50%; max-width: 800px; height: auto; display: block; margin: 0 auto 1.5rem;">
</div>

<!-- üìë √çndice del proyecto (navegador horizontal) -->
<nav class="flex flex-wrap justify-center gap-4 bg-nav-bg shadow-md rounded-lg p-3 mb-8">
  <a href="#desafio" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Desaf√≠o
  </a>
  <a href="#tecnologias utilizadas" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Tecnolog√≠as utilizadas
  </a>
  <a href="#pasos realizados" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Pasos realizados
  </a>
  <a href="#resultado" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Resultado
  </a>
  <a href="#conclusiones" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Conclusiones
  </a>
</nav>




<!-- Secci√≥n Desaf√≠o -->
<h3 id="desafio" class="text-xl font-semibold mt-8 mb-4 font-montserrat">Desaf√≠o:</h3>

<ul class="list-disc list-inside text-black mb-6">

<div class="text-black mb-6">
<div class="text-black mb-6">
  <p style="margin-bottom: 1rem;">
<div class="descripcion-proyecto">
  <p>
    El principal reto consist√≠a en dise√±ar un sistema defensivo capaz de reaccionar ante intentos de acceso no autorizados, bloqueando IPs agresivas en tiempo real sin depender de soluciones externas ni afectar la disponibilidad del servicio SSH.
  </p>

  <p style="margin-bottom: 1rem;">
    La infraestructura carec√≠a de mecanismos de respuesta automatizada, filtrado geogr√°fico o trazabilidad de eventos, lo que dificultaba la detecci√≥n y mitigaci√≥n de accesos maliciosos.
  </p>

  <p style="margin-bottom: 1rem;">
    Este desaf√≠o exig√≠a una soluci√≥n ligera y aut√≥noma que permitiera auditar los intentos fallidos, identificar el pa√≠s de origen de cada IP y aplicar bloqueos din√°micos mediante iptables, todo ello documentado y ejecutable desde un entorno local.
  </p>
</div>




<!-- Secci√≥n Tecnolog√≠as -->
<h3 id="tecnologias utilizadas" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
</h3>
<h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Tecnolog√≠as utilizadas:</h3>

<!-- Logos en fila arriba -->
<div class="flex gap-4 mb-4">
  <img src="https://rafaelmperez.com/assets/icons/cloudflare.png" alt="Cloudflare" class="w-12 h-12">
  <img src="https://rafaelmperez.com/assets/icons/nikto.png" alt="Nikto" class="w-12 h-12">
  <img src="https://rafaelmperez.com/assets/icons/sslyze.png" alt="SSLyze" class="w-12 h-12">
  <img src="https://rafaelmperez.com/assets/icons/owaspzap.png" alt="Owasp Zap" class="w-12 h-12">
</div>

<ul class="list-disc list-inside text-black">
  <!-- contenido de la lista -->
</ul>


<ul class="list-disc list-inside text-black">
  <li><strong>iptables</strong> Sistema de filtrado de paquetes que permite bloquear IPs espec√≠ficas en tiempo real, aplicando reglas din√°micas en la cadena <code>INPUT</code> del firewall local.</li>
  
  <li><strong>GeoIP</strong> Herramienta de geolocalizaci√≥n que identifica el pa√≠s de origen de cada IP mediante consultas locales, permitiendo aplicar criterios defensivos basados en ubicaci√≥n.</li>
  
  <li><strong>Bash</strong> Lenguaje de scripting utilizado para automatizar la detecci√≥n de intentos fallidos, el an√°lisis GeoIP y la ejecuci√≥n de bloqueos, todo dentro de un script aut√≥nomo y documentado.</li>
  
  <li><strong>Auth.log</strong> Archivo de registro del sistema que almacena los intentos de autenticaci√≥n SSH, utilizado como fuente principal para detectar accesos fallidos y comportamientos sospechosos.</li>
  
  <li><strong>iptables -L</strong> Comando de verificaci√≥n que permite listar las reglas activas del firewall, confirmando que las IPs bloqueadas han sido correctamente a√±adidas a la pol√≠tica defensiva.</li>
</ul>



  
<!-- Secci√≥n Pasos -->
<h3 id="pasos realizados" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
</h3>
<h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Pasos realizados:</h3>
<ol class="list-decimal text-black space-y-8">
  <li>
    <div class="text-black mb-6">
      <p><strong>Fase 0: Inicio desde configuraci√≥n predeterminada</strong></p>
      <p style="margin-bottom: 1.5rem;">
        El proceso comienza desde una instalaci√≥n limpia de sistema Linux, sin reglas de firewall activas ni mecanismos de bloqueo automatizado. No se cuenta con herramientas de geolocalizaci√≥n ni scripts defensivos, lo que permite documentar cada ajuste desde su origen y evaluar su impacto de forma progresiva.
      </p>
      <p style="margin-bottom: 1.5rem;">
        El servicio SSH est√° expuesto con su configuraci√≥n predeterminada, sin l√≠mites de intentos ni filtrado por pa√≠s. El sistema no registra ni reacciona ante accesos fallidos, y no existen logs estructurados ni visualizaci√≥n de eventos.
      </p>
      <p style="margin-bottom: 1.5rem;">
        El objetivo de esta fase es establecer un punto de partida claro y documentado para aplicar medidas defensivas. Se busca capturar el estado original del sistema, identificar carencias b√°sicas y preparar el entorno para la implementaci√≥n progresiva de un firewall reactivo con geolocalizaci√≥n.
      </p>
<img src="https://rafaelmperez.com/assets/img/geoip1.jpg" alt="Estado inicial sin reglas de firewall" style="width: 92%; max-width: 600px;" class="preview-img">
    </div>
  </li>

  <li>
    <div class="text-black mb-6">
      <p><strong>Fase 1: Instalaci√≥n de herramientas</strong></p>
      <ul>
        <li>Creaci√≥n del entorno de trabajo:</li>
        <pre>mkdir -p ~/proyectos/geo-firewall && cd ~/proyectos/geo-firewall</pre>
        <li>Actualizaci√≥n del sistema:</li>
        <pre>sudo apt update && sudo apt upgrade -y</pre>
        <li>Instalaci√≥n de <code>geoip-bin</code> para consultas locales:</li>
        <pre>sudo apt install geoip-bin</pre>
        <li>Prueba de geolocalizaci√≥n:</li>
        <pre>geoiplookup 8.8.8.8</pre>
        <li>Verificaci√≥n de intentos SSH en <code>/var/log/auth.log</code></li>
        <li>Creaci√≥n y edici√≥n del script <code>geo-block.sh</code> con l√≥gica de detecci√≥n y bloqueo</li>
        <li>Asignaci√≥n de permisos de ejecuci√≥n:</li>
        <pre>chmod +x geo-block.sh</pre>
      </ul>
      <img src="https://rafaelmperez.com/assets/img/geoip2.jpg" alt="Edici√≥n del script geo-block.sh" style="width: 92%; max-width: 600px;" class="preview-img">
    </div>
  </li>

  <li>
    <div class="text-black mb-6">
      <p><strong>Fase 2: Ejecuci√≥n y pruebas</strong></p>
      <ul>
        <li>Simulaci√≥n de intentos fallidos desde IP local</li>
        <li>Ejecuci√≥n del script:</li>
        <pre>sudo ./geo-block.sh</pre>
        <li>Verificaci√≥n de bloqueos en <code>iptables -L</code> y <code>logs/blocked.log</code></li>
        <li>Visualizaci√≥n de los √∫ltimos registros:</li>
        <pre>tail -n 5 logs/blocked.log</pre>
        <li>Notificaci√≥n local (opcional):</li>
        <pre>notify-send "geoFirewall" "Blocked $IP from $COUNTRY"</pre>
      </ul>
      <img src="https://rafaelmperez.com/assets/img/geoip3.jpg" alt="Bloqueo de IPs y log generado" class="preview-img">
    </div>
  </li>

  <li>
    <div class="text-black mb-6">
      <p><strong>Fase 3: Validaci√≥n y trazabilidad</strong></p>
      <p style="margin-bottom: 1.5rem;">
        El sistema ahora detecta intentos fallidos de acceso SSH, identifica el pa√≠s de origen de cada IP y bloquea autom√°ticamente aquellas que superan el umbral configurado y no pertenecen a Espa√±a. Cada acci√≥n queda registrada en un log estructurado, lo que permite trazabilidad y revisi√≥n posterior.
      </p>
      <p style="margin-bottom: 1.5rem;">
        Se ha verificado que las reglas <code>DROP</code> se aplican correctamente en iptables, y que el log <code>blocked.log</code> contiene entradas con fecha, IP, pa√≠s y motivo del bloqueo. Esto permite auditar el comportamiento del sistema y ajustar los umbrales si es necesario.
      </p>
      <img src="https://rafaelmperez.com/assets/img/geoip4.jpg" alt="Log de IPs bloqueadas" class="preview-img">
    </div>
  </li>
</ol>




</div>

<div class="text-black mb-6">
  <h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Resultado:</h3>
  

  <p style="margin-bottom: 1.5rem;">
    El sistema ahora detecta intentos fallidos de acceso SSH, identifica el pa√≠s de origen de cada IP mediante GeoIP y bloquea autom√°ticamente aquellas que superan el umbral configurado y no pertenecen a Espa√±a. Cada acci√≥n queda registrada en un log estructurado, lo que permite trazabilidad, revisi√≥n y mejora continua.
  </p>

  <p style="margin-bottom: 1.5rem;">
    El script <code>geo-block.sh</code> se ejecuta localmente, sin depender de servicios externos, y aplica reglas <code>DROP</code> en iptables de forma din√°mica. El archivo <code>blocked.log</code> documenta cada evento con fecha, IP, pa√≠s y motivo del bloqueo.
  </p>

  <p style="margin-bottom: 1.5rem;">
    Se ha validado el funcionamiento mediante simulaciones locales, visualizaci√≥n de logs y revisi√≥n de reglas activas en el firewall. El sistema es ligero, reproducible y ampliable, y puede integrarse con herramientas como Grafana o Suricata para visualizaci√≥n y detecci√≥n avanzada.
  </p>


</div>


<div class="p-4 sm:p-6 mt-16 mb-6 bg-white rounded-lg shadow-md">
  <h3 class="text-lg sm:text-xl font-semibold mt-6 mb-2 font-montserrat">
    Conclusiones y Recomendaciones Finales:
  </h3>
  <h3 id="conclusiones" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
  </h3>

  <p class="text-black mb-4 leading-relaxed text-sm sm:text-base">
    El sistema ha evolucionado desde una configuraci√≥n b√°sica y expuesta a una soluci√≥n defensiva automatizada capaz de bloquear IPs maliciosas en tiempo real. El script reactivo con GeoIP permite filtrar accesos por pa√≠s y comportamiento, reforzando el servicio SSH sin depender de herramientas externas.
  </p>



  <ul class="list-disc list-inside mb-4 space-y-2 text-sm sm:text-base leading-relaxed">
    <li>
      <strong>Aplicaci√≥n de buenas pr√°cticas:</strong> Se ha implementado un sistema de bloqueo reactivo por IP y pa√≠s, con trazabilidad en logs y reglas iptables verificables.
    </li>
    <li>
      <strong>Auditor√≠a local:</strong> Se ha utilizado <code class="bg-gray-200 px-1 rounded">auth.log</code> como fuente principal para detectar intentos fallidos y <code class="bg-gray-200 px-1 rounded">geoiplookup</code> para filtrar por pa√≠s.
    </li>
    <li>
      <strong>Firewall activo:</strong> Las reglas iptables se actualizan din√°micamente, bloqueando IPs agresivas sin afectar la disponibilidad del servicio.
    </li>
    <li>
      <strong>Compromiso personal:</strong> Aunque ning√∫n sistema est√° exento de ataques, este entorno ha sido reforzado con convicci√≥n y se recomienda aplicar estas pr√°cticas como base de cualquier sistema expuesto.
    </li>
  </ul>

  <p class="text-black leading-relaxed text-sm sm:text-base">
    Este ejercicio no solo mejora la postura defensiva del sistema, sino que refleja una cultura de prevenci√≥n y respuesta que deber√≠a ser est√°ndar en cualquier entorno administrado.
  </p>

  <p class="text-black leading-relaxed text-sm sm:text-base mt-4 italic">
    <strong>üìåNota: Este proyecto no termina aqu√≠, se contempla la integraci√≥n futura con herramientas como <code class="bg-gray-200 px-1 rounded">Grafana</code> para visualizaci√≥n de eventos y <code class="bg-gray-200 px-1 rounded">Suricata</code> para detecci√≥n avanzada. La mejora continua es parte del compromiso con la ciberseguridad aplicada.</strong>
  </p>
</div>

  
<div class="flex items-center">
  <a href="" class="text-sm flex items-center ml-auto text-black">
    Siguiente pr√°ctica t√©cnica <span class="ml-1">‚Üí</span>
  </a>
  <h3 id="conclusiones" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
  </h3>
</div>
  </p>
</div>
  </main>
  

 <footer class="text-center py-6 mt-16 font-montserrat" style="background-color: #000; color: rgb(255, 204, 0);">
  <p>¬© 2025 Rafael M. P√©rez - Portafolio Sysadmin Junior</p>
</footer>


</body>
</html>
