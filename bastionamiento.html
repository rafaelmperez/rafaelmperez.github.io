<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Implementaci√≥n y activaci√≥n de UFW en sistemas Linux. Proyecto de ciberseguridad con Ubuntu, Parrot OS, Bash, OpenSSH y m√°s. Portafolio de Rafael M. P√©rez, Sysadmin Junior.">
  <title> Bastionamiento del sitio web | Portafolio Rafael M.P√©rez | Sysadmin Junior</title>

  <!-- Estilos y recursos -->
  <link rel="stylesheet" href="assets/css/tailwind.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="icon" href="favicon.png" type="image/x-icon">
</head>
  
   <!-- ‚úÖ Open Graph (Facebook, LinkedIn, WhatsApp) -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Implementaci√≥n y Activaci√≥n UFW" />
  <meta property="og:description" content="Portafolio Rafael M.P√©rez | Sysadmin Junior" />
  <meta property="og:image" content="https://rafaelmperez.github.io/assets/img/vistapreliminarufw.v1.webp" />
  <meta property="og:url" content="https://rafaelmperez.github.io/activacionufw.html" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:image" content="https://rafaelmperez.github.io/assets/img/vistapreliminarufw.v1.webp" />
  <meta property="og:image:type" content="image/webp" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
<body>
  <!-- Aqu√≠ va el contenido de tu p√°gina -->
</body>
</html>


<!-- Google Fonts optimizado -->
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" as="style">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" media="print" onload="this.media='all'">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<!-- TailwindCSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: { ... }
  }
</script>


</head>

<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          'nav-bg': '#000000',          // fondo negro
          'nav-text': 'rgb(255, 204, 0)', // texto amarillo vibrante
          'nav-hover': '#FFB800'        // color hover amarillo m√°s oscuro
        }
      }
    }
  }
</script>



<body class="bg-gray-100 text-gray-800 font-sans">

  <!-- Header -->
<header class="p-6 shadow-lg font-montserrat bg-black text-yellow-400">
  <div class="max-w-6xl mx-auto flex items-center justify-between">
    <!-- T√≠tulo -->
    <h1 class="text-2xl font-bold">
      Portafolio Rafael M.P√©rez | Sysadmin Junior
    </h1>

    <!-- Imagen peque√±a a la derecha -->
<i class="fas fa-shield-alt" style="color: rgb(255, 204, 0); font-size: 24px;"></i>

  </div>
</header>

<!-- Contenido del microproyecto -->
 
<main class="w-full max-w-4xl mx-auto px-4 sm:px-6 py-8 sm:py-12">
<h2 class="text-2xl font-bold mb-6 font-montserrat underline underline-offset-4">
  Bastionamiento del sitio web
</h2>


  <!-- Logo insertado -->
<div class="flex justify-center mb-6">
  <img src="https://rafaelmperez.github.io/assets/img/bastionamiento.jpg" 
       alt="Logo UFW" 
       style="width: 50%; max-width: 800px; height: auto; display: block; margin: 0 auto 1.5rem;">
</div>

<!-- üìë √çndice del proyecto (navegador horizontal) -->
<nav class="flex flex-wrap justify-center gap-4 bg-nav-bg shadow-md rounded-lg p-3 mb-8">
  <a href="#desafio" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Desaf√≠o
  </a>
  <a href="#tecnologias utilizadas" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Tecnolog√≠as utilizadas
  </a>
  <a href="#pasos realizados" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Pasos realizados
  </a>
  <a href="#resultado" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Resultado
  </a>
  <a href="#conclusiones" class="px-3 py-1 text-sm sm:text-base font-medium text-nav-text hover:text-nav-hover transition-colors">
    Conclusiones
  </a>
</nav>




<!-- Secci√≥n Desaf√≠o -->
<h3 id="desafio" class="text-xl font-semibold mt-8 mb-4 font-montserrat">Desaf√≠o:</h3>

<ul class="list-disc list-inside text-black mb-6">

<div class="text-black mb-6">
<div class="text-black mb-6">
  <p style="margin-bottom: 1rem;">
    El principal reto consist√≠a en transformar un sitio web funcional pero vulnerable en una plataforma resiliente frente a amenazas comunes y avanzadas. Con la configuraci√≥n predeterminada del servidor y la ausencia de pol√≠ticas de seguridad expl√≠citas, el sitio quedaba expuesto a m√∫ltiples vectores de ataque, como la suplantaci√≥n de contenido, la interceptaci√≥n de datos y la manipulaci√≥n de cabeceras HTTP.
  </p>

  <p style="margin-bottom: 1rem;">
    Adem√°s, no se contaba con mecanismos de auditor√≠a ni visibilidad sobre el estado real de la infraestructura.
  </p>

  <p style="margin-bottom: 1rem;">
    Este desaf√≠o exig√≠a una estrategia progresiva que permitiera bastionar el entorno sin comprometer la disponibilidad ni la experiencia del usuario, integrando herramientas de escaneo y an√°lisis que ofrecieran una visi√≥n clara y continua del nivel de seguridad alcanzado en cada fase.
  </p>
</div>




<!-- Secci√≥n Tecnolog√≠as -->
<h3 id="tecnologias utilizadas" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
</h3>
<h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Tecnolog√≠as utilizadas:</h3>

<!-- Logos en fila arriba -->
<div class="flex gap-4 mb-4">
  <img src="https://rafaelmperez.github.io/assets/icons/cloudflare.png" alt="Cloudflare" class="w-12 h-12">
  <img src="https://rafaelmperez.github.io/assets/icons/nikto.png" alt="Nikto" class="w-12 h-12">
  <img src="https://rafaelmperez.github.io/assets/icons/ssllabs.png" alt="ssllabs" class="w-12 h-12">
  <img src="https://rafaelmperez.github.io/assets/icons/sslyze.png" alt="SSLyze" class="w-12 h-12">
  <img src="https://rafaelmperez.github.io/assets/icons/owaspzap.png" alt="Owasp Zap" class="w-12 h-12">
</div>

<ul class="list-disc list-inside text-black">
  <!-- contenido de la lista -->
</ul>


<ul class="list-disc list-inside text-black">
      <li><strong>Cloudflare</strong>  Plataforma de seguridad y rendimiento que protege el servidor mediante mitigaci√≥n de ataques DDoS, firewall de aplicaciones web (WAF), gesti√≥n de certificados SSL y pol√≠ticas de acceso.</li>
      <li><strong>Nikto</strong> Esc√°ner de vulnerabilidades que se ejecuta desde una m√°quina cliente para detectar configuraciones inseguras, archivos expuestos y cabeceras mal implementadas en el servidor web.</li>
      <li><strong>SSL Labs</strong> Plataforma de an√°lisis profundo de configuraci√≥n TLS/SSL que permite evaluar la calidad del cifrado, la compatibilidad con navegadores modernos y la presencia de cabeceras como HSTS. Ideal para validar la robustez del canal seguro.</li>
      <li><strong>Security Headers</strong> Herramienta que analiza las cabeceras HTTP de seguridad implementadas en el sitio, como <code>X-Frame-Options</code>, <code>Content-Security-Policy</code> y <code>Strict-Transport-Security</code>, ayudando a detectar omisiones o configuraciones d√©biles.</li>
      <li><strong>testssl.sh</strong> Script local de escaneo TLS que permite detectar vulnerabilidades criptogr√°ficas conocidas (Heartbleed, ROBOT, POODLE, etc.), validar protocolos activos y revisar la calidad de las suites de cifrado ofrecidas por el servidor.</li>
    </ul>
  


  

    <!-- Secci√≥n Pasos -->
<h3 id="pasos realizados" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
</h3>
    <h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Pasos realizados:</h3>
<ol class="list-decimal text-black space-y-8">
  <li>
<p class="mb-2"><strong>Fase 0: Inicio desde configuraci√≥n predeterminada:</strong></p>
    <p class="text-black mb6">

<div class="text-black mb-6">
  <p style="margin-bottom: 1.5rem;">
    El proceso de bastionamiento comienza desde una instalaci√≥n limpia, sin reglas personalizadas ni configuraciones avanzadas. Se parte de la configuraci√≥n predeterminada de Github Pages, lo que permite documentar cada ajuste de seguridad desde su origen y evaluar su impacto de forma progresiva.
  </p>

  <p style="margin-bottom: 1.5rem;">
    El sitio web se encuentra alojado en Github Pages, sin reglas de firewall, certificados personalizados ni optimizaciones activas. El servidor web mantiene su configuraci√≥n por defecto, sin cabeceras HTTP de seguridad ni pol√≠ticas de acceso definidas. Los registros DNS se limitan a los b√°sicos (A, CNAME, MX), sin proxy ni enrutamiento inteligente, y el modo SSL/TLS se encuentra en estado flexible para facilitar auditor√≠as iniciales. No hay herramientas activas de escaneo, monitoreo o protecci√≥n adicional.
  </p>

  <p style="margin-bottom: 1.5rem;">
    El objetivo de esta fase es establecer un punto de partida claro y documentado para aplicar medidas de bastionamiento. Se busca capturar el estado original del sitio, identificar vulnerabilidades b√°sicas y preparar el entorno para la implementaci√≥n progresiva de pol√≠ticas de seguridad.
  </p>
</div>

<p class="mb-2"><strong>Fase 1: Auditor√≠as de seguridad:</strong></p>
    <p class="text-black mb6">
  Esta fase tiene como objetivo identificar vulnerabilidades, configuraciones inseguras y debilidades criptogr√°ficas en el sitio web <code>rafaelmperez.com</code>. Se han utilizado herramientas especializadas para evaluar distintos aspectos de la seguridad, desde cabeceras HTTP hasta cifrado SSL/TLS. Los resultados obtenidos servir√°n como punto de partida para aplicar medidas de bastionado en fases posteriores.
</p>


<li>
  <p class="mb-2"><strong>Security Headers:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/securityheaders.jpg" alt="Security Headers Scan" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Utilic√© la herramienta web <a href="https://securityheaders.com">Security Headers</a> para evaluar la implementaci√≥n de cabeceras HTTP de seguridad en el sitio web. Esta herramienta analiza si el servidor incluye cabeceras que protegen contra ataques comunes como XSS, clickjacking, fuga de datos y ejecuci√≥n de contenido malicioso.
  </p>
  <pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
    <code class="bg-gray-200 px-1 rounded">https://securityheaders.com/?q=rafaelmperez.com</code>
  </pre>
  <p class="text-black mb6">
    El an√°lisis arroj√≥ una calificaci√≥n <strong>F</strong>, indicando una postura de seguridad d√©bil. Aunque algunas cabeceras est√°n presentes, muchas est√°n mal configuradas o ausentes. Entre las m√°s cr√≠ticas se encuentran:
    </p>
    <ul class="list-disc pl-6 text-black mb-6">
      <li><strong>Strict-Transport-Security:</strong> ausente. Recomendado: <code>max-age=31536000; includeSubDomains</code>.</li>
      <li><strong>Content-Security-Policy:</strong> presente pero d√©bil. Debe restringir fuentes externas para prevenir XSS.</li>
      <li><strong>X-Frame-Options:</strong> ausente. Recomendado: <code>SAMEORIGIN</code> para evitar clickjacking.</li>
      <li><strong>X-Content-Type-Options:</strong> ausente. Recomendado: <code>nosniff</code> para evitar MIME-sniffing.</li>
      <li><strong>Referrer-Policy:</strong> ausente. Controla la informaci√≥n compartida al navegar entre sitios.</li>
      <li><strong>Permissions-Policy:</strong> ausente. Limita el acceso a APIs del navegador como c√°mara, micr√≥fono, etc.</li>
    </ul>
  <p class="text-black mb6">
    Adem√°s, se detect√≥ una pol√≠tica CORS muy permisiva (<code>access-control-allow-origin: *</code>), lo cual puede exponer el sitio a riesgos si no se gestiona adecuadamente. Se recomienda revisar y aplicar una configuraci√≥n m√°s estricta y personalizada de cabeceras para mejorar la resiliencia del sitio frente a amenazas comunes.
  </p>
</li>


<li>
  <p class="mb-2"><strong>Nikto:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/analisisnikto.jpg" alt="Nikto Scan Result" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Seguidamente utilic√© la herramienta <a href="https://cirt.net/Nikto2">Nikto</a> para realizar un escaneo de seguridad sobre el sitio web. Nikto permite detectar configuraciones inseguras, cabeceras mal implementadas, archivos expuestos y comportamientos an√≥malos del servidor web.
  </p>
  <pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
    <code class="bg-gray-200 px-1 rounded">nikto -h https://rafaelmperez.com -p 443</code>
  </pre>
  <p class="text-black mb6">
    El escaneo revel√≥ varios aspectos que requieren atenci√≥n. Entre los hallazgos m√°s relevantes se encuentran:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Cabeceras de seguridad ausentes:</strong> como <code>X-Frame-Options</code> y <code>X-Content-Type-Options</code>, lo que aumenta el riesgo de clickjacking y sniffing de contenido.</li>
    <li><strong>Certificado SSL no coincidente:</strong> el dominio utiliza un certificado wildcard para <code>*.github.io</code>, lo cual no valida correctamente <code>rafaelmperez.com</code>.</li>
    <li><strong>Fuga de metadatos v√≠a ETag:</strong> el servidor expone identificadores internos que podr√≠an facilitar fingerprinting.</li>
    <li><strong>Cabeceras inusuales:</strong> como <code>x-fastly-request-id</code>, <code>x-github-request-id</code> y <code>x-proxy-cache</code>, que revelan detalles del entorno de alojamiento.</li>
    <li><strong>robots.txt sin restricciones:</strong> lo que permite indexaci√≥n completa por parte de motores de b√∫squeda.</li>
    <li><strong>Servidor detr√°s de proxy o WAF:</strong> el banner del servidor cambia entre <code>GitHub.com</code> y <code>Varnish</code>, lo que indica la presencia de un balanceador de carga o firewall de aplicaciones.</li>
  </ul>
  <p class="text-black mb6">
    Estos hallazgos sugieren que el sitio carece de medidas b√°sicas de protecci√≥n en su capa HTTP y presenta una configuraci√≥n SSL poco robusta. Se recomienda implementar cabeceras de seguridad, revisar el certificado y limitar la exposici√≥n de metadatos para fortalecer la postura de seguridad.
  </p>
</li>



<li>
  <p class="mb-2"><strong>testssl.sh:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/testssl-sh.jpg" alt="testssl.sh Scan Result" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Posteriormente utilic√© la herramienta <a href="https://testssl.sh/">testssl.sh</a> para realizar un escaneo t√©cnico profundo del canal HTTPS del sitio web. Esta herramienta permite detectar vulnerabilidades conocidas, evaluar la configuraci√≥n de cifrado y verificar el soporte de protocolos SSL/TLS.
  </p>
  <pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
    <code class="bg-gray-200 px-1 rounded">./testssl.sh https://rafaelmperez.com</code>
  </pre>
  <p class="text-black mb6">
    El escaneo revel√≥ que el servidor no es vulnerable a ataques conocidos como:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Heartbleed</strong></li>
    <li><strong>POODLE</strong></li>
    <li><strong>FREAK</strong></li>
    <li><strong>DROWN</strong></li>
    <li><strong>CRIME</strong></li>
    <li><strong>CCS Injection</strong></li>
  </ul>
  <p class="text-black mb6">
    Tambi√©n se confirm√≥ el soporte para protocolos modernos como <code>TLS 1.2</code> y <code>TLS 1.3</code>, y el uso de cipher suites seguras como <code>TLS_AES_128_GCM_SHA256</code>. No obstante, se detectaron aspectos que requieren atenci√≥n:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Cabeceras laxas:</strong> como <code>access-control-allow-origin: *</code>, que permiten solicitudes desde cualquier origen.</li>
    <li><strong>Presencia de cabeceras internas:</strong> como <code>x-fastly-request-id</code>, <code>x-github-request-id</code>, y <code>x-served-by</code>, que revelan detalles del entorno de alojamiento.</li>
    <li><strong>Servidor detr√°s de proxy o WAF:</strong> el banner indica que el sitio est√° protegido por un balanceador de carga o firewall de aplicaciones.</li>
  </ul>
  <p class="text-black mb6">
    En conjunto, los resultados muestran una configuraci√≥n criptogr√°fica s√≥lida, pero con oportunidades de mejora en la gesti√≥n de cabeceras HTTP y en la personalizaci√≥n del entorno de seguridad. Se recomienda revisar las pol√≠ticas CORS, ocultar cabeceras internas y reforzar la configuraci√≥n TLS con pol√≠ticas como HSTS y OCSP stapling.
  </p>
</li>


<li>
  <p class="mb-2"><strong>SSL Labs:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/ssllabs.jpg" alt="SSL Labs Scan Result" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Por √∫ltimo, en esta primera fase de detecci√≥n utilic√© la herramienta web <a href="https://www.ssllabs.com/ssltest/">SSL Labs</a> de Qualys para evaluar la configuraci√≥n SSL/TLS del sitio. Esta herramienta realiza un an√°lisis profundo del cifrado, certificados, compatibilidad con navegadores y resistencia frente a vulnerabilidades conocidas.
  </p>
  <pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
    <code class="bg-gray-200 px-1 rounded">https://www.ssllabs.com/ssltest/analyze.html?d=rafaelmperez.com</code>
  </pre>
  <p class="text-black mb6">
    El escaneo arroj√≥ una calificaci√≥n <strong>A</strong> para los subdominios asociados al servidor, lo que indica una configuraci√≥n SSL/TLS robusta. Entre los aspectos positivos se destacan:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Soporte para TLS 1.2 y TLS 1.3:</strong> protocolos modernos y seguros.</li>
    <li><strong>Uso de certificados v√°lidos:</strong> emitidos por autoridades reconocidas.</li>
    <li><strong>Compatibilidad con navegadores actuales:</strong> sin advertencias ni errores de validaci√≥n.</li>
    <li><strong>Ausencia de vulnerabilidades cr√≠ticas:</strong> como Heartbleed, POODLE o FREAK.</li>
  </ul>
  <p class="text-black mb6">
    Aunque la calificaci√≥n es alta, se observ√≥ que el certificado utilizado es un wildcard para <code>*.github.io</code>, lo que no valida directamente el dominio <code>rafaelmperez.com</code>. Adem√°s, no se detect√≥ la implementaci√≥n de pol√≠ticas como HSTS o OCSP stapling, que podr√≠an reforzar a√∫n m√°s la seguridad del canal HTTPS.
  </p>
  <p class="text-black mb6">
    Se recomienda personalizar el certificado para el dominio principal y aplicar pol√≠ticas avanzadas de seguridad TLS para maximizar la protecci√≥n frente a ataques de intermediarios y mejorar la confianza del usuario.
  </p>
</li>


<h2 class="text-xl font-bold mb-4">Fase 2: Bastionado y medidas aplicadas</h2>
<p class="text-black mb-6">
  En esta fase se aplican medidas concretas para reforzar la seguridad del sistema. Se parte de los hallazgos obtenidos en la auditor√≠a inicial y se implementan configuraciones que reducen la superficie de ataque, mejoran el cifrado y protegen el entorno frente a amenazas comunes.
</p>




<li>
  <p class="mb-2"><strong>Vinculaci√≥n con Cloudflare:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/cloudflare.jpg" alt="Configuraci√≥n DNS en Cloudflare para GitHub Pages" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Para comenzar se configur√≥ el dominio <code>rafaelmperez.com</code> en Cloudflare para gestionar el tr√°fico web, aplicar pol√≠ticas de seguridad y optimizar el rendimiento. En el panel de DNS se a√±adieron los registros necesarios para apuntar a GitHub Pages:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li>Registro tipo <strong>A</strong> apuntando a <code>185.199.108.153</code> (IP de GitHub Pages).</li>
    <li>Registro tipo <strong>CNAME</strong> para subdominios si aplica.</li>
    <li>Activaci√≥n del proxy de Cloudflare (nube naranja) para proteger y filtrar el tr√°fico.</li>
  </ul>
</li>




<li>
  <p class="mb-2"><strong>Nota:</strong></p> 
  <p class="text-black mb6">
    El dominio ya se encontraba previamente vinculado y activo en GitHub Pages. Esto indica que los registros DNS estaban correctamente configurados y que GitHub hab√≠a verificado la titularidad del dominio en una etapa anterior.
  </p>
  <p class="text-black mb6">
    Gracias a esta vinculaci√≥n previa, no fue necesario a√±adir un nuevo registro TXT para verificaci√≥n. El dominio se resolv√≠a correctamente y contaba con soporte HTTPS desde el inicio de la auditor√≠a.
  </p>
</li>




<li>
  <p class="mb-2"><strong>Configuraci√≥n SSL/TLS:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/cloudflare2.jpg" alt="Modo SSL/TLS en Cloudflare" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Se activ√≥ el modo <strong>Full (Strict)</strong> en la secci√≥n SSL/TLS de Cloudflare, lo que garantiza que la conexi√≥n entre el navegador y Cloudflare, y entre Cloudflare y GitHub Pages, est√© cifrada con certificados v√°lidos. Esta configuraci√≥n evita el uso de certificados autofirmados y mejora la seguridad del canal HTTPS.
  </p>
</li>

<li>
  <p class="mb-2"><strong>Aplicaci√≥n de cabeceras HTTP seguras:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/cloudflare3.jpg" alt="Transform Rules en Cloudflare para cabeceras" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Se utilizaron <strong>Transform Rules</strong> en Cloudflare para a√±adir cabeceras de seguridad directamente desde la red de distribuci√≥n. Esto permite aplicar pol√≠ticas como:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><code>Strict-Transport-Security</code></li>
    <li><code>X-Frame-Options</code></li>
    <li><code>X-Content-Type-Options</code></li>
    <li><code>Referrer-Policy</code></li>
    <li><code>Permissions-Policy</code></li>
    <li><code>Content-Security-Policy</code> con fuentes espec√≠ficas</li>
  </ul>
  <p class="text-black mb6">
    Estas cabeceras se aplican sin necesidad de modificar el c√≥digo fuente del sitio, lo que es ideal para proyectos est√°ticos como los alojados en GitHub Pages.
  </p>
</li>

<li>
  <p class="mb-2"><strong>Limpieza de cabeceras internas:</strong></p> 
  <p class="text-black mb6">
    Se revisaron las cabeceras expuestas por el proxy de Cloudflare mediante herramientas como <code>curl</code> y <code>SecurityHeaders</code>. No se detectaron cabeceras internas como <code>x-github-request-id</code>, <code>x-fastly-request-id</code> o <code>x-served-by</code>, por lo que no fue necesario aplicar reglas de eliminaci√≥n.
  </p>
  <p class="text-black mb6">
    En caso de que estas cabeceras aparezcan en el futuro, se recomienda aplicar reglas de transformaci√≥n en Cloudflare para eliminarlas desde el per√≠metro.
  </p>
</li>


<li>
  <p class="mb-2"><strong>Edge Certificates y configuraci√≥n de HSTS:</strong></p> 
  <img src="https://rafaelmperez.github.io/assets/img/cloudflare4.jpg" alt="Configuraci√≥n de HSTS en Cloudflare" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
  <p class="text-black mb6">
    Se activ√≥ el certificado SSL universal gestionado por Cloudflare para el dominio. Este certificado es emitido por la autoridad <strong>SSL.com</strong> y validado mediante registros TXT internos (_acme-challenge), sin necesidad de intervenci√≥n manual.
  </p>

  <p class="text-black mb6">
    Adem√°s, se activ√≥ la pol√≠tica <strong>HTTP Strict Transport Security (HSTS)</strong> en Cloudflare, con los siguientes par√°metros:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><code>max-age</code>: 12 meses</li>
    <li><code>includeSubDomains</code>: activado</li>
    <li><code>preload</code>: activado</li>
  </ul>
  <p class="text-black mb6">
    Tambi√©n se habilitaron las siguientes opciones complementarias:
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Usar siempre HTTPS</strong>: activado</li>
    <li><strong>Reescrituras autom√°ticas HTTPS</strong>: activado</li>
    <li><strong>TLS m√≠nimo:</strong> 1.2</li>
    <li><strong>TLS 1.3:</strong> activado</li>
  </ul>
  <p class="text-black mb6">
    Esta configuraci√≥n garantiza que todas las conexiones al sitio se realicen de forma segura, evitando el uso de HTTP y protegiendo contra ataques de tipo downgrade o MITM.
  </p>
</li>

<li>
  <p class="mb-2"><strong>Bloqueo de tr√°fico fuera de Europa:</strong></p> 
  <p class="text-black mb6">
    Se cre√≥ una regla personalizada de seguridad en Cloudflare para restringir el acceso al sitio web a visitantes ubicados en pa√≠ses europeos espec√≠ficos y el resto del mundo. Esta medida reduce el riesgo de tr√°fico malicioso proveniente de regiones no relevantes para el proyecto.
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Nombre de la regla:</strong> Bloqueo fuera de Europa</li>
    <li><strong>Campo:</strong> <code>http.request.geo.country</code></li>
    <li><strong>Operador:</strong> <code>no est√° en</code></li>
    <li><strong>Valor:</strong> <code>{"ES", "FR", "DE", "IT", "PT"}</code></li>
    <li><strong>Acci√≥n:</strong> <code>Managed Challenge</code> (desaf√≠o autom√°tico para visitantes fuera de Europa)</li>
  </ul>
  <p class="text-black mb6">
    Esta regla se aplica desde el per√≠metro de Cloudflare, antes de que el tr√°fico alcance el servidor de origen (GitHub Pages). En lugar de bloquear directamente, se utiliza <strong>Managed Challenge</strong> para permitir el acceso solo a usuarios leg√≠timos que superen la verificaci√≥n.
  </p>
  <img src="https://rafaelmperez.github.io/assets/img/cloudflare5.jpg" alt="Regla de seguridad geogr√°fica en Cloudflare" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
</li>

<li>
  <p class="mb-2"><strong>Configuraciones adicionales de seguridad:</strong></p> 
  <p class="text-black mb6">
    Se aplicaron m√∫ltiples configuraciones avanzadas de seguridad desde el panel de Cloudflare para reforzar la protecci√≥n del dominio <code>rafaelmperez.com</code>. Estas medidas se implementaron desde el plan Free, aprovechando las funcionalidades disponibles para mitigar amenazas comunes como bots, scraping, ataques DDoS y rastreadores de IA.
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>DNSSEC (Domain Name System Security Extensions)</strong> Sirve para proteger el dominio contra manipulaciones maliciosas en el sistema DNS.</li>
    <li><strong>Modo ‚ÄúI'm Under Attack‚Äù:</strong> activado. Presenta un desaf√≠o JavaScript a todos los visitantes antes de cargar el sitio, ideal para mitigar ataques DDoS.</li>
    <li><strong>Bloqueo de bots de IA:</strong> activado. Se implement√≥ una regla administrada para bloquear rastreadores utilizados en el entrenamiento de modelos de inteligencia artificial.</li>
    <li><strong>Modo Bot Fight:</strong> activado. Detecta y desaf√≠a bots automatizados que realizan scraping, fraude de clics o fuerza bruta.</li>
    <li><strong>Protecci√≥n contra ataques DDoS:</strong> activa en todas las capas (red, HTTP, SSL/TLS). Cloudflare mitiga autom√°ticamente ataques como SYN flood, UDP flood y ataques de agotamiento SSL.</li>
    <li><strong>Pasaje de desaf√≠o:</strong> configurado a 30 minutos. Los visitantes que superan un desaf√≠o no reciben otro durante ese periodo, mejorando la experiencia sin comprometer la seguridad.</li>
    <li><strong>Detecci√≥n de credenciales filtradas:</strong> activa. Limita intentos de autenticaci√≥n con contrase√±as comprometidas.</li>
    <li><strong>AI Labyrinth:</strong> activado. Inserta enlaces nofollow generados por IA para confundir rastreadores que ignoran las normas de exclusi√≥n.</li>
    <li><strong>Bloqueo por agente de usuario:</strong> disponible. Se puede aplicar para bloquear navegadores o herramientas espec√≠ficas que presenten encabezados sospechosos.</li>
    <li><strong>Protecci√≥n contra exploits de aplicaciones web:</strong> activa mediante reglas administradas por Cloudflare.</li>
    <li><strong>Reemplazo de bibliotecas JavaScript inseguras:</strong> habilitado. Cloudflare sustituye autom√°ticamente bibliotecas vulnerables por versiones seguras desde cdnjs.</li>
  </ul>
  <p class="text-black mb6">
    Estas configuraciones se gestionan desde el nuevo panel de seguridad de aplicaciones de Cloudflare, que permite filtrar por tipo de amenaza, configurar reglas personalizadas y aplicar plantillas de protecci√≥n automatizada. La postura de seguridad del dominio se considera endurecida al m√°ximo dentro del alcance del plan Free.
  </p>
</li>




  <p class="text-black mb-6">
  <strong>Nota:</strong> Aunque el bastionado de servidores suele incluir la configuraci√≥n de firewalls como UFW, esta medida no aplica en el presente caso, ya que el sitio <code>rafaelmperez.com</code> est√° alojado en <strong>GitHub Pages</strong>. La infraestructura subyacente es gestionada por GitHub, y no se tiene acceso directo al entorno de red ni al sistema operativo. Por tanto, las medidas de seguridad se enfocan exclusivamente en la capa web: cabeceras HTTP, cifrado TLS, certificados y pol√≠ticas de navegador.
</p>

</li>

<!-- Secci√≥n Resultado -->
<h3 id="resultado" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
</h3>
<section id="resultado-security-headers" class="mb-12">
  
  <h2 class="text-xl font-bold mb-4">Resultado: Auditor√≠a de cabeceras HTTP (Security Headers)</h2>

  <p class="text-black mb-6">
    <img src="https://rafaelmperez.github.io/assets/img/bastionamientoresultado.jpg" alt="Resultado del escaneo en SecurityHeaders.com" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
    Tras aplicar las medidas de bastionado en Cloudflare, el sitio web pas√≥ de una calificaci√≥n <strong>F</strong> a <strong>A+</strong> en <strong>SecurityHeaders.com</strong>, validando la correcta implementaci√≥n de cabeceras cr√≠ticas como <code>Strict-Transport-Security</code>, <code>Content-Security-Policy</code> y <code>Permissions-Policy</code>.
  </p>

  <ul class="list-disc pl-6 text-black mb-6">
    <li>Cabeceras duplicadas corregidas mediante reglas de transformaci√≥n</li>
    <li>Redirecci√≥n forzada a HTTPS y TLS 1.2/1.3 activos</li>
    <li>Pol√≠tica CSP personalizada aplicada con fuentes seguras</li>
    <li>Cabeceras internas eliminadas desde el per√≠metro</li>
  </ul>

  <p class="text-black mb-6">
    Este resultado demuestra que el entorno web ha sido reforzado con √©xito, alcanzando un nivel de seguridad √≥ptimo sin afectar la disponibilidad ni la experiencia del usuario.
  </p>
</section>


<li>
  <p class="mb-2"><strong>Escaneo con Nikto:</strong></p> 
  <p class="text-black mb6">
    Volvimos a ejecutar un escaneo con <strong>Nikto</strong> sobre el dominio usando el comando <code>nikto -h https://rafaelmperez.com -p 443</code> para detectar vulnerabilidades comunes en servidores web. El resultado fue positivo desde el punto de vista defensivo, ya que el sitio respondi√≥ con c√≥digo 403, lo que indica que el firewall bloque√≥ el escaneo.
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Servidor detectado:</strong> Cloudflare</li>
    <li><strong>CGI directories:</strong> no se encontraron rutas vulnerables</li>
    <li><strong>C√≥digo de respuesta:</strong> 403 Forbidden (escaneo bloqueado)</li>
  </ul>
  <p class="text-black mb6">
    Aunque Nikto no pudo completar el escaneo por bloqueo del firewall, esto es deseable en entornos productivos. Se recomienda revisar la cabecera <code>X-Frame-Options</code> para confirmar que est√© activa y no duplicada, como se detect√≥ en escaneos anteriores.
  </p>
</li>

<li>
  <p class="mb-2"><strong>Escaneo con SSL Labs:</strong></p> 
  <p class="text-black mb6">
    Seguidamente un escaneo completo del dominio utilizando la herramienta <strong>SSL Labs</strong>, con el objetivo de validar la configuraci√≥n TLS, el certificado SSL y la seguridad del canal de transporte. El resultado fue una calificaci√≥n <strong>A+</strong>, lo que indica cumplimiento total con las mejores pr√°cticas de cifrado y seguridad.
  </p>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Protocolos activos:</strong> TLS 1.2 y TLS 1.3</li>
    <li><strong>Certificado:</strong> v√°lido, emitido por Cloudflare, con cadena completa</li>
    <li><strong>HSTS:</strong> activo con <code>preload</code> habilitado</li>
    <li><strong>Forward Secrecy:</strong> soportado en todos los navegadores modernos</li>
    <li><strong>Servidores detectados:</strong> se pas√≥ de 4 a 14 servidores distribuidos globalmente, lo que mejora la disponibilidad y la tolerancia a fallos</li>
    <li><strong>Vulnerabilidades conocidas:</strong> no se detectaron (Heartbleed, ROBOT, etc.)</li>
  </ul>
  <p class="text-black mb6">
    Este resultado confirma que el sitio no solo est√° bastionado en la capa de aplicaci√≥n, sino tambi√©n en la capa de transporte. La expansi√≥n de infraestructura con m√°s servidores mejora la resiliencia y el rendimiento global.
  </p>
</li>



<li>
  <p class="mb-2"><strong>Escaneo con testssl.sh:</strong></p> 
  <p class="text-black mb6">
    Por √∫ltimo se volvi√≥ a ejecutar un escaneo local utilizando la herramienta <strong>testssl.sh</strong> para validar la seguridad del canal TLS. Los comandos utilizados fueron:
  </p>
  <pre class="bg-gray-100 p-4 rounded text-sm text-black mb-4">
<code>cd testssl.sh
./testssl.sh https://rafaelmperez.com</code>
  </pre>
  <ul class="list-disc pl-6 text-black mb-6">
    <li><strong>Heartbleed, CCS, Ticketbleed, POODLE, FREAK, DROWN:</strong> no vulnerabilidades detectadas</li>
    <li><strong>ROBOT:</strong> no se soportan suites RSA inseguras (OK)</li>
    <li><strong>Secure Renegotiation:</strong> soportado correctamente</li>
    <li><strong>CRIME, BEAST, LOGJAM, Winshock:</strong> no vulnerabilidades detectadas</li>
    <li><strong>RC4 y SSLv3:</strong> no soportados</li>
    <li><strong>TLS_FALLBACK_SCSV:</strong> activo, evita degradaci√≥n de protocolo</li>
  </ul>
  <p class="text-black mb6">
    El escaneo confirma que el sitio <code>rafaelmperez.com</code> opera bajo una configuraci√≥n TLS moderna y segura, sin exposici√≥n a vulnerabilidades cr√≠ticas conocidas. Se valida as√≠ la efectividad del bastionado aplicado en la capa de transporte.
  </p>
</li>








 

</ol>






Integral, escalable y sostenible de protecci√≥n, especialmente en entornos con soporte extendido como Ubuntu 24.04 LTS.
</p>
</div>



</div>



<div class="p-4 sm:p-6 mt-16 mb-6 bg-white rounded-lg shadow-md">
  <h3 class="text-lg sm:text-xl font-semibold mt-6 mb-2 font-montserrat">
    Conclusiones y Recomendaciones Finales:
  </h3>
  </a>
  <h3 id="conclusiones" class="text-xl font-semibold mt-8 mb-4 font-montserrat scroll-mt-24">
  </h3>
</div>
  <p class="text-black mb-4 leading-relaxed text-sm sm:text-base">
    El sitio web ha evolucionado de una configuraci√≥n predeterminada y vulnerable a una plataforma bastionada con cabeceras clave, cifrado robusto y escaneos t√©cnicos que validan su seguridad. La infraestructura ha crecido de 4 a 14 servidores distribuidos, lo que mejora la resiliencia y el rendimiento global.
  </p>

  <!-- Bloque de im√°genes comparativas -->
  <div class="grid grid-cols-2 gap-4 mb-6">
    <div class="flex flex-col items-center">
      <img src="https://rafaelmperez.github.io/assets/img/securityheaders.jpg" alt="Antes" class="rounded shadow-md w-full max-w-xs">
      <span class="mt-2 text-sm text-black">Antes</span>
    </div>
    <div class="flex flex-col items-center">
      <img src="https://rafaelmperez.github.io/assets/img/bastionamientoresultado.jpg" alt="Despu√©s" class="rounded shadow-md w-full max-w-xs">
      <span class="mt-2 text-sm text-black">Despu√©s</span>
    </div>
  </div>

  <ul class="list-disc list-inside mb-4 space-y-2 text-sm sm:text-base leading-relaxed">
    <li>
      <strong>Aplicaci√≥n de buenas pr√°cticas:</strong> Se han implementado cabeceras HTTP seguras, redirecci√≥n forzada a HTTPS, y compatibilidad con TLS 1.2/1.3.
    </li>
    <li>
      <strong>Escaneos t√©cnicos:</strong> Se han utilizado herramientas como <code class="bg-gray-200 px-1 rounded">Nikto</code>, <code class="bg-gray-200 px-1 rounded">SSL Labs</code> y <code class="bg-gray-200 px-1 rounded">testssl.sh</code> para validar la seguridad desde distintas capas.
    </li>
    <li>
      <strong>Firewall perimetral:</strong> Cloudflare act√∫a como primera l√≠nea de defensa, bloqueando escaneos y mitigando ataques comunes.
    </li>
    <li>
      <strong>Compromiso personal:</strong> Aunque ning√∫n sistema est√° exento de ser atacado, reduce significativamente su atractivo como objetivo de ataque. Aun as√≠, se ha reforzado con convicci√≥n y se recomienda aplicar estas pr√°cticas, ya que muchas brechas ocurren por descuidos evitables.
    </li>
  </ul>

<p class="text-black leading-relaxed text-sm sm:text-base">
  Este ejercicio no solo mejora la postura de seguridad del sitio, sino que refleja una cultura de prevenci√≥n y responsabilidad digital que deber√≠a ser est√°ndar en cualquier proyecto web.
</p>

<p class="text-black leading-relaxed text-sm sm:text-base mt-4 italic">
  <strong>*Nota: Este proyecto no termina aqu√≠. Se seguir√°n realizando auditor√≠as peri√≥dicas con herramientas como <code class="bg-gray-200 px-1 rounded">OWASP ZAP</code> para an√°lisis de vulnerabilidades web, <code class="bg-gray-200 px-1 rounded">Nuclei</code> para escaneos automatizados de seguridad, y <code class="bg-gray-200 px-1 rounded">Lynis</code> para auditor√≠as de sistemas Linux. La mejora continua es parte del compromiso con la ciberseguridad.</strong>
</p>


  </main>
  
  <div class="flex items-center">
  <a href="" class="text-sm flex items-center ml-auto text-black">
    Siguiente pr√°ctica t√©cnica <span class="ml-1">‚Üí</span>


 <footer class="text-center py-6 mt-16 font-montserrat" style="background-color: #000; color: rgb(255, 204, 0);">
  <p>¬© 2025 Rafael M. P√©rez - Portafolio Sysadmin Junior</p>
</footer>


</body>
</html>
