<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Implementación y Activación UFW | Portafolio Rafael M.Pérez | Sysadmin Junior</title>

  <!-- Fuentes Google -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Roboto', 'sans-serif'],
            montserrat: ['Montserrat', 'sans-serif'],
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

  <!-- Header -->
<header class="p-6 shadow-lg font-montserrat" style="background-color: #000; color: rgb(255, 204, 0);">
  <div class="max-w-6xl mx-auto flex justify-between items-center">
    <h1 class="text-2xl font-bold">Portafolio Rafael M.Pérez | Sysadmin Junior</h1>
    <a href="siguiente_reto.html" class="text-sm flex items-center" style="color: rgb(255, 204, 0);">
      Siguiente práctica técnica<span class="ml-1">→</span>
    </a>
  </div>
</header>

  <!-- Contenido del microproyecto -->
<main class="max-w-4xl mx-auto px-6 py-12">
  <h2 class="text-2xl font-bold mb-6 font-montserrat">
    Implementación y Validación de UFW como Firewall Local en Linux
  </h2>

  <!-- Logo insertado -->
  <div class="flex justify-center mb-6">
    <img src="https://rafaelmperez.github.io/assets/img/logoufw.jpg" alt="Logo UFW" class="w-full max-w-xl h-auto">
  </div>

  <ul class="list-disc list-inside text-black mb-6">
    Este microproyecto aborda la necesidad de fortificar la seguridad de sistemas Linux mediante la activación y configuración de un firewall local. Muchos entornos operan sin restricciones de tráfico entrante, lo que representa un riesgo significativo. El objetivo es aplicar UFW (Uncomplicated Firewall) para establecer políticas de acceso claras, minimizar la superficie de ataque y garantizar que solo los servicios autorizados estén expuestos.

    Como parte del proceso de validación, se ha incluido la configuración y prueba de acceso remoto mediante SSH desde una máquina cliente con Parrot OS. Esta integración permite comprobar que UFW no solo bloquea el tráfico no deseado, sino que también permite conexiones legítimas y funcionales bajo condiciones seguras.</p>
    <h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Tecnologías utilizadas:</h3>
<ul class="list-disc list-inside text-black">
      <li><strong>Ubuntu 24.04 LTS</strong>  Sistema operativo del servidor protegido.</li>
      <li><strong>Parrot OS</strong> Máquina cliente utilizada para pruebas de acceso remoto</li>
      <li><strong>Bash</strong> Utilizada para ejecutar comandos y scripts de configuración.</li>
      <li><strong>UFW (Uncomplicated Firewall)</strong> Herramienta principal para definir reglas de tráfico.</li>
      <li><strong>OpenSSH</strong> Protocolo utilizado para validar el acceso remoto seguro.</li>
    </ul>

    <h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Pasos realizados:</h3>
<ol class="list-decimal list-inside text-black space-y-8">
  <li>
    <p class="mb-2"><strong>Actualización del sistema e instalación de UFW:</p></strong> 
    <p class="text-black mb6">
      Para comenzar, se ejecutó la actualización del sistema con el comando <code class="bg-gray-200 px-1 rounded">sudo apt update && sudo apt upgrade -y</code>, lo que garantiza que todos los paquetes estén en su versión más reciente. A continuación, se procedió con la instalación de <strong>UFW (Uncomplicated Firewall)</strong> mediante <code class="bg-gray-200 px-1 rounded">sudo apt install ufw -y</code>. Esta herramienta permite gestionar reglas de firewall de forma sencilla y efectiva, ideal para entornos Linux donde se requiere control de tráfico entrante y saliente.
    </p>
  </li>

  <li>
    <p class="mb-2"></p><strong>Establecimiento de políticas por defecto:</p></strong> 
    <p class="text-black mb6">
      Tras instalar UFW, se verificó su correcta instalación ejecutando <code class="bg-gray-200 px-1 rounded">ufw --version</code>. Este comando muestra la versión instalada y confirma que el firewall está disponible en el sistema. Si se presenta algún error o advertencia, se recomienda revisar los permisos, el estado del paquete o reinstalarlo.
    </p>
    <p class="text-black mb6">
      A continuación, se definieron las políticas por defecto del firewall. Estas reglas establecen el comportamiento general ante el tráfico entrante y saliente:
    </p>
<pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
<code class="bg-gray-200 px-1 rounded">sudo ufw default deny incoming</code>
<code class="bg-gray-200 px-1 rounded">sudo ufw default allow outgoing</code>
    </pre>
    <p class="text-black mb6">
      Con estas configuraciones, se bloquea todo el tráfico entrante no autorizado, mientras se permite el tráfico saliente. Esta política es ideal para servidores que deben protegerse de accesos externos no deseados, pero que necesitan comunicarse con otros servicios o realizar actualizaciones.
    </p>
  </li>

  <li>
    <p class="mb-2"></p><strong>Permitir acceso SSH:</p></strong> 
    <p class="text-black mb6">
      Antes de activar UFW, es fundamental permitir el acceso por SSH si estás conectado remotamente al servidor. De lo contrario, podrías bloquear tu propia conexión y perder el acceso. Para habilitar el puerto estándar de SSH (22), se ejecuta el siguiente comando:
    </p>
<pre class="bg-gray-100 p-4 rounded text-base text-black overflow-x-auto mb-4">
    <code class="bg-gray-200 px-1 rounded">sudo ufw allow ssh</code>
    </pre>
    <p class="text-black mb6">
      En caso de haber modificado el puerto SSH por razones de seguridad (por ejemplo, al <code class="bg-gray-200 px-1 rounded">2222</code>), se debe especificar el nuevo puerto en la regla:
    </p>
<pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
    <code class="bg-gray-200 px-1 rounded">sudo ufw allow 2222/tcp</code>
    </pre>
    <p class="text-black mb6">
      Esta configuración garantiza que el acceso remoto permanezca disponible una vez que el firewall esté activo. Es una medida preventiva esencial para evitar bloqueos involuntarios, especialmente en entornos sin acceso físico al servidor.
    </p>
  </li>

  <li>
    <p class="mb-2"></p><strong>Activar el firewall:</p></strong> 
<img src="https://rafaelmperez.github.io/assets/img/activarufw.jpg" alt="Activar el firewall" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
    <p class="text-black mb6">
      Una vez definidas las políticas por defecto y permitidos los accesos necesarios (como SSH), se procede a activar el firewall. Este paso aplica todas las reglas configuradas y comienza a proteger el sistema de forma efectiva:
    </p>
<pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
<code class="bg-gray-200 px-1 rounded">sudo ufw enable</code>
    </pre>
    <p class="text-black mb6">
      El sistema solicitará confirmación antes de activar UFW. Tras aceptar, el firewall entra en funcionamiento y comienza a aplicar las reglas definidas. Es recomendable realizar este paso con precaución, especialmente si se está conectado remotamente.
    </p>
  </li>

  <li>
    <p class="mb-2"></p><strong>Verificar el estado y las reglas:</p></strong> 
<img src="https://rafaelmperez.github.io/assets/img/verificarestado.jpg" alt="Activar el firewall" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
    <p class="text-black mb6">
      Para confirmar que UFW está activo y que las reglas se han aplicado correctamente, se utiliza el siguiente comando. Este muestra el estado actual del firewall, las políticas por defecto y las reglas específicas habilitadas:
    </p>
    <pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">

    <code class="bg-gray-200 px-1 rounded">sudo ufw status verbose</code>
    </pre>
    <p class="text-black mb6">
      El modo <code class="bg-gray-200 px-1 rounded">verbose</code> ofrece una vista detallada, ideal para auditorías o revisiones técnicas. Si alguna regla no aparece como esperada, se recomienda revisar la configuración o consultar los registros del sistema.
    </p>
  </li>
  <li>
  <p class="mb-2"><strong>Pruebas de acceso:</strong></p>
  <img src="https://rafaelmperez.github.io/assets/img/nmap.png" alt="Activar el firewall" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">

<p class="text-black mb-6">
    Una vez activado UFW, es fundamental realizar pruebas desde otro equipo o máquina virtual para verificar que las reglas están funcionando correctamente. Estas pruebas permiten validar que el tráfico no autorizado está siendo bloqueado y que los servicios permitidos siguen accesibles.
  </p>
  <ul class="list-disc list-inside text-black mb-4">
    <li>Intentar conectarte por SSH al servidor.</li>
    <li>Probar el acceso a puertos que deberían estar bloqueados.</li>
    <li>Verificar si el tráfico se filtra correctamente según las reglas definidas.</li>
  </ul>
  <p class="text-black mb-4">
    Para realizar un escaneo de puertos, puedes utilizar la herramienta <strong>nmap</strong> desde otro equipo. El siguiente comando escanea los primeros 1000 puertos del servidor:
  </p>
  <pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
<code class="bg-gray-200 px-1 rounded">nmap -p 1-1000 &lt;IP-del-servidor&gt;</code>
  </pre>
  <p class="text-black">
    Si el firewall está correctamente configurado, deberías ver únicamente los puertos que has permitido explícitamente (como el de SSH). Esta prueba confirma que UFW está filtrando el tráfico como se espera.
  </p>
</li>

<p class="mb-2"><strong>Acceso remoto controlado (SSH):</strong></p>
  <img src="https://rafaelmperez.github.io/assets/img/sshconnect.png" alt="Activar el firewall" style="width:100%; max-width:900px;" class="rounded-lg shadow-md">
<p class="text-black mb-6">
  Como parte de la validación del firewall, se configuró y probó el acceso remoto mediante SSH desde una máquina virtual con Parrot OS hacia el servidor Ubuntu. Esta conexión permite administrar el servidor de forma segura, siempre que el puerto 22 esté habilitado y las reglas de UFW lo permitan.
</p>
<ul class="list-disc list-inside text-black mb-4">
  <li>Se creó el usuario <code class="bg-gray-200 px-1 rounded">world</code> en el servidor Ubuntu.</li>
  <li>Se verificó que el servicio SSH estuviera activo y escuchando en el puerto 22.</li>
  <li>Se intentó la conexión desde Parrot OS utilizando el comando <code class="bg-gray-200 px-1 rounded">ssh world@&lt;IP-del-servidor&gt;</code>.</li>
  <li>Se detectó lentitud en la respuesta de la terminal, lo cual se resolvió ajustando la configuración del servidor SSH.</li>
</ul>
<p class="text-black mb-4">
  Para mejorar el rendimiento de la conexión, se modificaron los siguientes parámetros en el archivo <code class="bg-gray-200 px-1 rounded">/etc/ssh/sshd_config</code>:
</p>
<pre class="bg-gray-100 p-4 rounded text-sm text-black overflow-x-auto mb-4">
<code class="bg-gray-200 px-1 rounded">UseDNS no
GSSAPIAuthentication no</code>
</pre>
<p class="text-black mb-4">
  Además, se verificó que el usuario tuviera asignado un shell válido (<code class="bg-gray-200 px-1 rounded">/bin/bash</code>) y se renombraron temporalmente los archivos de inicio (<code class="bg-gray-200 px-1 rounded">.bashrc</code> y <code class="bg-gray-200 px-1 rounded">.profile</code>) para descartar bloqueos en la sesión.
</p>
<p class="text-black mb-4">
  Finalmente, se logró establecer una conexión SSH estable y funcional, confirmando que el firewall permite el acceso remoto de forma controlada. Esta prueba valida que las reglas de UFW están correctamente aplicadas y que el servicio SSH está operativo bajo condiciones seguras.
</p>


</ol>
<div class="p-4 mb-4">
  <h3 class="text-xl font-semibold mt-8 mb-4 font-montserrat">Conclusiones y Recomendaciones Finales:</h3>
  <p class="text-black mb6">
    La implementación de UFW como firewall local en sistemas Linux —especialmente sobre plataformas modernas como Ubuntu 24.04 LTS— representa una medida esencial para reforzar la seguridad perimetral de servidores. Al establecer políticas restrictivas por defecto y permitir únicamente los servicios necesarios, se reduce significativamente la superficie de ataque y se mejora el control sobre el tráfico de red.
  </p>
  <ul class="list-disc list-inside mb-2">
    <li><strong>Auditorías periódicas:</strong> Revisa las reglas de UFW regularmente mediante comandos como <code>ufw status numbered</code> para garantizar que estén alineadas con los servicios activos del sistema.</li>
    <li><strong>Registro de eventos:</strong> Considera integrar UFW con herramientas como <code class="bg-gray-200 px-1 rounded">logwatch</code>, <code class="bg-gray-200 px-1 rounded">fail2ban</code> o el sistema de <code class="bg-gray-200 px-1 rounded">journald</code></code> para detectar y mitigar intentos de acceso no autorizados.</li>
    <li><strong>Seguridad por capas:</strong> Refuerza el firewall con autenticación por clave SSH, desactivación de servicios innecesarios mediante <code class="bg-gray-200 px-1 rounded">systemctl</code>, uso de puertos alternativos y aplicación de actualizaciones automáticas con <code class="bg-gray-200 px-1 rounded">unattended-upgrades</code> o Snap.</li>
    <li><strong>Pruebas de conectividad:</strong> Después de cada cambio en las reglas, realiza pruebas desde clientes externos utilizando herramientas como <code class="bg-gray-200 px-1 rounded">nmap</code>, <code class="bg-gray-200 px-1 rounded">telnet</code> o <code class="bg-gray-200 px-1 rounded">curl</code> para verificar que los servicios autorizados siguen accesibles.</li>
  </ul>
  <p>
    Estas recomendaciones fortalecen la postura de seguridad del sistema y aseguran que el firewall no sea solo una barrera inicial, sino parte de una estrategia integral, escalable y sostenible de protección, especialmente en entornos con soporte extendido como Ubuntu 24.04 LTS.
  </p>
</div>





  </main>

 <footer class="text-center py-6 mt-16 font-montserrat" style="background-color: #000; color: rgb(255, 204, 0);">
  <p>© 2025 Rafael M. Pérez - Portafolio Sysadmin Junior</p>
</footer>


</body>
</html>
