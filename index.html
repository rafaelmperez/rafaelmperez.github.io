<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Inicializando…</title>

<style>
  body {
    background: #000;
    color: #fff;
    font-family: 'Share Tech Mono', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
    position: relative;
  }

  /* === SCANLINES CRT ELEGANTES === */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.015) 0px,
      rgba(255,255,255,0.015) 1px,
      transparent 2px,
      transparent 3px
    );
    pointer-events: none;
    z-index: 999;
    opacity: .25;
  }

  /* RUIDO ANALÓGICO */
  #noise {
    position: fixed;
    inset: 0;
    pointer-events: none;
    opacity: 0.04;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR4XmP4z8DwHwAFgwJ/lD1yfQAAAABJRU5ErkJggg==");
    mix-blend-mode: screen;
    z-index: 998;
  }

  /* DISTORSIÓN EMF SUAVE */
  @keyframes emf {
    0%   { transform: translate(0px, 0px); }
    40%  { transform: translate(0.6px, 0px); }
    60%  { transform: translate(-0.4px, 0px); }
    80%  { transform: translate(0.2px, 0px); }
    100% { transform: translate(0px, 0px); }
  }
  body {
    animation: emf 6s infinite linear;
  }

  /* CONTENEDOR CENTRAL */
  #wrapper {
    position: relative;
    width: 100%;
    max-width: 1150px;
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 10;
  }

  /* MARCO DORADO HUD */
  #screen-frame {
    position: absolute;
    inset: 20px;
    border: 2px solid #f0c674;
    border-radius: 8px;
    box-shadow:
        0 0 18px #f0c67455,
        inset 0 0 14px #f0c67433,
        0 0 45px #f0c67422;
    pointer-events: none;
    z-index: 2000;
  }

  #top-block {
    text-align: center;
    margin-bottom: 10px;
  }

  /* ASCII DORADO */
  .ascii {
    color: #f0c674;
    text-shadow:
      0 0 4px #f0c67455,
      0 0 10px #f0c67455;
    animation: asciiGlow 3s ease-in-out infinite;
    font-family: monospace;
    font-size: 13.6px;
    line-height: 1.10;
    white-space: pre;
    display: inline-block;
  }

  @keyframes asciiGlow {
    0%   { text-shadow: 0 0 3px #f0c67455; }
    50%  { text-shadow: 0 0 12px #f0c674aa; }
    100% { text-shadow: 0 0 3px #f0c67455; }
  }

  .subtitle {
    margin-top: 8px;
    font-size: 1rem;
    color: #e6e6e6;
    opacity: 0.85;
  }

  #terminal {
    white-space: pre-wrap;
    font-size: 1.05rem;
    line-height: 1.28rem;
    opacity: 0;
    transform: scale(0.95);
    transition: opacity .25s ease, transform .25s ease;
    text-align: left;
    width: 100%;
    max-width: 750px;
    margin-top: 18px;
  }

  /* FLASH IBM */
  @keyframes ibmFlash {
    0%   { opacity: 0; filter: brightness(1.4) blur(1px); }
    20%  { opacity: 1; filter: brightness(2.8) blur(0px); }
    40%  { opacity: 1; filter: brightness(.8); }
    70%  { opacity: 1; filter: brightness(1.2); }
    100% { opacity: 1; filter: brightness(1); }
  }

  /* CURSOR */
  .cursor {
    display: inline-block;
    width: 10px;
    height: 18px;
    background: #fff;
    margin-left: 6px;
    animation: blinkCursor .8s steps(1) infinite;
  }

  @keyframes blinkCursor {
    50% { opacity: 0; }
  }

  /* FADE OUT */
  #fade {
    position: fixed;
    inset: 0;
    background: #000;
    opacity: 0;
    transition: opacity .9s ease-in-out;
    pointer-events: none;
    z-index: 1000;
  }

  /* === BARRA SLIM HUD DORADA === */
  #progress-bar {
    width: 0%;
    height: 6px;
    background: linear-gradient(90deg, #f0c674, #f7e49c);
    box-shadow: 0 0 8px #f0c674aa;
    border-radius: 10px;
    margin: 12px 0;
    transition: width .45s ease;
  }

</style>
</head>

<body>

<div id="noise"></div>
<div id="screen-frame"></div>
<div id="fade"></div>

<div id="wrapper">

  <div id="top-block"></div>

  <!-- BARRA HUD -->
  <div id="progress-bar"></div>

  <div id="terminal"></div>

</div>

<audio id="key" src="https://rafaelmperez.com/sounds/clip.aac" preload="auto"></audio>

<script>

/* ===============================
            ASCII LOGO
   =============================== */

const asciiLogo = `
 ######                                                                                                                           
 #     #   ##   ######   ##   ###### #      #    # #####  ###### #####  ###### ######      ####   ####  #    # 
 #     #  #  #  #       #  #  #      #      ##  ## #    # #      #    # #          #      #    # #    # ##  ## 
 ######  #    # #####  #    # #####  #      # ## # #    # #####  #    # #####     #       #      #    # # ## # 
 #   #   ###### #      ###### #      #      #    # #####  #      #####  #        #        #      #    # #    # 
 #    #  #    # #      #    # #      #      #    # #      #      #   #  #       #     ### #    # #    # #    # 
 #     # #    # #      #    # ###### ###### #    # #      ###### #    # ###### ###### ###  ####   ####  #    # 
`;

const subtitleText = "by codebyRalph";

/* ===============================
            COMANDOS
   =============================== */

const commands = [
  "[BOOT] Inicializando entorno seguro...",
  "[OK]   Cargando módulos principales...",
  "[OK]   Verificando integridad del sistema...",
  "[OK]   Servicios operativos.",
  "",
  "[ACCESS] accediendo a rafaelmperez.com"
];

/* Porcentaje sincronizado */
const progressMap = [20, 45, 68, 85, 100];

const topBlock = document.getElementById("top-block");
const terminal = document.getElementById("terminal");
const key = document.getElementById("key");
const bar = document.getElementById("progress-bar");

function playKey() {
  key.currentTime = 0;
  key.volume = 0.1;
  key.play().catch(() => {});
}

/* ===============================
      ASCII + SUBTÍTULO
   =============================== */

function insertTop() {
  const ascii = document.createElement("pre");
  ascii.classList.add("ascii");
  ascii.textContent = asciiLogo;

  const subtitle = document.createElement("div");
  subtitle.classList.add("subtitle");
  subtitle.textContent = subtitleText;

  topBlock.appendChild(ascii);
  topBlock.appendChild(subtitle);
}

/* ===============================
      COMANDOS + PROGRESO
   =============================== */

let index = 0;

function writeCommands() {
  if (index >= commands.length) return showCursorAndExit();

  const line = document.createElement("div");
  line.textContent = commands[index];
  playKey();
  terminal.appendChild(line);

  /* Actualizar barra */
  bar.style.width = progressMap[index] + "%";

  index++;
  setTimeout(writeCommands, 460);
}

/* ===============================
            CURSOR FINAL
   =============================== */

function showCursorAndExit() {
  const cursorLine = document.createElement("div");
  cursorLine.innerHTML = "$<span class='cursor'></span>";
  terminal.appendChild(cursorLine);

  setTimeout(() => {
    document.getElementById("fade").style.opacity = "1";
    setTimeout(() => {
      window.location.href = "https://rafaelmperez.com/home.html";
    }, 950);
  }, 1200);
}

/* ===============================
              INICIO
   =============================== */

document.addEventListener("DOMContentLoaded", () => {

  insertTop();

  setTimeout(() => {
    terminal.style.opacity = "1";
    terminal.style.transform = "scale(1)";
    terminal.style.animation = "ibmFlash 0.40s ease";

    setTimeout(writeCommands, 400);

  }, 250);

});
</script>

</body>
</html>
