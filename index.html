<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Inicializando…</title>

<style>
  body {
    background: #000;
    color: #ffd700;
    font-family: 'Share Tech Mono', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  #terminal {
    white-space: pre;
    font-size: 1.25rem;
    line-height: 1.25;
    opacity: 0;
    transform: scale(0.96);
    transition: opacity .25s ease, transform .25s ease;
  }

  /* Flash estilo IBM */
  @keyframes ibmFlash {
    0%   { opacity: 0; filter: brightness(1.2); }
    20%  { opacity: 1; filter: brightness(2.2); }
    40%  { opacity: 1; filter: brightness(.7); }
    70%  { opacity: 1; filter: brightness(1.3); }
    100% { opacity: 1; filter: brightness(1); }
  }

  /* Fade-out final */
  #fade {
    position: fixed;
    inset: 0;
    background: #000;
    opacity: 0;
    transition: opacity .8s ease-in-out;
    pointer-events: none;
  }
</style>
</head>

<body>
<div id="fade"></div>
<div id="terminal"></div>

<audio id="key" src="https://rafaelmperez.com/sounds/clip.aac" preload="auto"></audio>

<script>
/* ================================
       ASCII LOGO — APARICIÓN IBM
   ================================ */

const asciiLogo = `
 ######                                                                                                                           
 #     #   ##   ######   ##   ###### #      #    # #####  ###### #####  ###### ######      ####   ####  #    # 
 #     #  #  #  #       #  #  #      #      ##  ## #    # #      #    # #          #      #    # #    # ##  ## 
 ######  #    # #####  #    # #####  #      # ## # #    # #####  #    # #####     #       #      #    # # ## # 
 #   #   ###### #      ###### #      #      #    # #####  #      #####  #        #        #      #    # #    # 
 #    #  #    # #      #    # #      #      #    # #      #      #   #  #       #     ### #    # #    # #    # 
 #     # #    # #      #    # ###### ###### #    # #      ###### #    # ###### ###### ###  ####   ####  #    # 
`;

/* Comandos más breves */
const commands = [
  "$ cargando entorno...",
  "$ inicializando módulos...",
  "$ verificando estado...",
  "$ acceso concedido ✔",
  "",
  "$ accediendo a rafaelmperez.com"
];

const terminal = document.getElementById("terminal");
const key = document.getElementById("key");

function playKey() {
  key.currentTime = 0;
  key.volume = 0.12;
  key.play().catch(() => {});
}

/* Escribir líneas una por una */
let index = 0;
function writeCommands() {
  if (index >= commands.length) return endSequence();

  terminal.textContent += "\n" + commands[index];
  playKey();
  index++;

  setTimeout(writeCommands, 280);
}

/* Fade-out y redirección */
function endSequence() {
  setTimeout(() => {
    document.getElementById("fade").style.opacity = "1";
    setTimeout(() => {
      window.location.href = "https://rafaelmperez.com/home.html";
    }, 850);
  }, 500);
}

/* Inicio */
document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => {
    terminal.style.opacity = "1";
    terminal.style.transform = "scale(1)";
    terminal.style.animation = "ibmFlash 0.38s ease";

    /* ASCII aparece de golpe */
    terminal.textContent = asciiLogo;

    /* Después comienzan las líneas */
    setTimeout(writeCommands, 400);

  }, 200);
});
</script>

</body>
</html>
