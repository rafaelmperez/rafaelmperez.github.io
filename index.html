<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Inicializando…</title>

<style>
  body {
    background: #000;
    color: #ffd700;
    font-family: 'Share Tech Mono', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  #terminal {
    font-size: 1.4rem;
    white-space: pre-wrap;
    text-align: left;
    line-height: 1.4;
    opacity: 0;
    transform: scale(0.97);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }

  /* Cursor del tipo profesional */
  .cursor {
    display: inline-block;
    width: 10px;
    height: 18px;
    background: #ffd700;
    margin-left: 4px;
    animation: blink 0.8s steps(1) infinite;
    vertical-align: middle;
  }

  @keyframes blink {
    50% { opacity: 0; }
  }

  /* Glitch suave */
  @keyframes glitch {
    0%, 100% { text-shadow: none; }
    50% { text-shadow: 1px 0px #ffd70055; }
  }

  /* Fade-out */
  #fade {
    position: fixed;
    inset: 0;
    background: #000;
    opacity: 0;
    transition: opacity .8s ease-in-out;
    pointer-events: none;
  }
</style>
</head>

<body>
<div id="fade"></div>
<div id="terminal"></div>
<audio id="key" src="https://rafaelmperez.com/sounds/clip.aac" preload="auto"></audio>

<script>
/* ================================
      CONFIGURACIÓN
   ================================ */

const asciiLogo = [
  "[ rafaelmperez.com ]",
  "       system initialized",
  "        powered by codebyraphael",
];

const commands = [
  "$ inicializando_portafolio.sh",
  "$ cargando módulos de seguridad...",
  "$ verificando integridad del entorno...",
  "$ estableciendo parámetros de operación...",
  "$ acceso concedido ✔",
  "",
  "$ redirigiendo a rafaelmperez.com"
];

const terminal = document.getElementById("terminal");
const key = document.getElementById("key");
let lineIndex = 0;

function playKey() {
  key.currentTime = 0;
  key.volume = 0.12;
  key.play().catch(() => {});
}

/* ================================
      ESCRITURA POR LÍNEAS (TOP)
   ================================ */

function writeLines(lines, callback) {
  if (lineIndex >= lines.length) {
    lineIndex = 0;
    return callback();
  }

  const text = lines[lineIndex];
  terminal.innerHTML += text + "\n";
  playKey();

  lineIndex++;

  setTimeout(() => writeLines(lines, callback), 320);
}

/* ================================
      FADE OUT FINAL
   ================================ */

function fadeOut() {
  document.getElementById("fade").style.opacity = "1";
  setTimeout(() => {
    window.location.href = "https://rafaelmperez.com/home.html";
  }, 900);
}

/* ================================
         INICIO DE LA INTRO
   ================================ */

document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => {
    terminal.style.opacity = "1";
    terminal.style.transform = "scale(1)";
    terminal.style.animation = "glitch 0.25s ease";

    writeLines(asciiLogo, () => {
      setTimeout(() => {
        writeLines(commands, () => {
          setTimeout(fadeOut, 400);
        });
      }, 350);
    });

  }, 200);
});
</script>

</body>
</html>
